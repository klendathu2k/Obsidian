- sPHENIX production system
	- Tadashi's reply... each step in a CWL should be implemented as a prun task
	- Immediate goal is to submit sPHENIX pass1 ... as pure prun task... 
	- Test task submitted... to ensure that prun uploads the pass1 run script...
	- The "--workDir=job/" option did not perform as expected... returned an error stating I need to run under that directory... but if I wanted to run under that directory I would have... the whole point of that option is to upload files from a specified directory...

>7890 99999
total 52
drwxr-xr-x 3 sphnxpro sphenix 4096 Mar 21 11:50 .
drwxrwx--- 5 sphnxpro sphenix 4096 Mar 21 11:50 ..
-rw-r--r-- 1 sphnxpro sphenix   21 Mar 21 11:50 .rootrc
drwxr-xr-x 4 sphnxpro sphenix 4096 Mar 21 11:50 5dae597a-eae3-461b-b2e5-f2a778512357
-rw-r--r-- 1 sphnxpro sphenix  815 Mar 21 11:50 jobO.1164ffb4-cef1-4411-b394-c729b07d6f73.tar.gz
-rw-r--r-- 1 sphnxpro sphenix  298 Mar 21 11:50 outfilename.h
***-rwxr-xr-x 1 sphnxpro sphenix 1573 Mar 21 11:50 run_hfprod.sh***
-rw-r--r-- 1 sphnxpro sphenix   23 Mar 21 11:50 run_hfprod_99999.out
-rw-r--r-- 1 sphnxpro sphenix    0 Mar 21 11:50 tmp.stderr.9d9d0e69-c053-453c-8fb6-fee79859edc3
-rw-r--r-- 1 sphnxpro sphenix  236 Mar 21 11:50 tmp.stdout.354e45ce-8828-4e29-a931-dc846b0828b6
-rw-r--r-- 1 sphnxpro sphenix  124 Mar 21 11:50 trf.567580c2-7762-4d00-9761-a247dec0af66.py
-rw-r--r-- 1 sphnxpro sphenix 9024 Mar 21 11:50 wrapper.o
5dae597a-eae3-461b-b2e5-f2a778512357
jobO.1164ffb4-cef1-4411-b394-c729b07d6f73.tar.gz
outfilename.h
run_hfprod.sh
run_hfprod_99999.out
tmp.stderr.9d9d0e69-c053-453c-8fb6-fee79859edc3
tmp.stdout.354e45ce-8828-4e29-a931-dc846b0828b6
trf.567580c2-7762-4d00-9761-a247dec0af66.py
wrapper.o

- The job runs and `ls` shows the single file which I uploaded...
- Can I upload subdirectories as well?  Yes... but doesn't look like it follows links to directories...
- There is a --followLinks option...
	- And it works as advertised...

- Let's test a few features ...

- Access to % variables in the script, starting with the RNDM run number...

`prun --exec "run_hfprod.sh mdc2.7 10 Charm TestSimulation ./ 1234567890 1" --outDS user.jwebb2.uuidgen --noBuild --vo wlcg --site BNL_OSG_SPHENIX --prodSourceLabel test --workingGroup ${PANDA_AUTH_VO} --maxAttempt 1 --followLinks`

- Nope... the % variables appear to be substituted at the command line...
	- Not sure *how* to access job meta information (task ID, etc...) in the shell script.
- Note: if you give sequence=N to start, jobs will be numbered starting from N+1.

- First attempt to run under a subdirectory... kinda failed w/out output.  b/c
	- misdirected to a nonexistant logfile
	- Fun4Fall ... should be Fun4All.
	- And it is really Fun4SegmentationFault...

- Cannot extract segment number from filename test-simulation
	- They encode some information into the filename... see their submission script / condor blah blah...

F4A test run setup...

Code runs... but no output...  ... and it invokes a copyscript...  OMFG.

F4A macro has code
if ( Enable::Production ) { Execute Copy Command... }




- StEvent maintenence
	-  [We can convert exisiting LaTeX documentation to markdown](https://tex.stackexchange.com/questions/341899/latex-to-markdown-converter)
	-  Quick test done... but my main has diverged... so... need to fix that before moving new changes.
	-  ... but, I can create the doc and expose it here...
	-  [[StEvent]] documentation
		-  Now I *can* edit the documentation... but plan should be to migrate it first.
		-  Then updating we should assign as service tasks to *postdocs* who are working with each subsystem.
	

- Related to StEvent... our MC data model should *have* documentation.  I have certainly put some effort into understanding the MC EDM... 
	- StMcEvent *is not* our MC EDM.  Our MC EDM is defined by the g2t structures.



---

[Unit Tests Strike Back: Testing the Hard Parts](https://www.youtube.com/watch?v=N2YJ4D7O7Oc)  multitasking this in the background.
- The bad advice for unit testing, when all of the good advice fails...
- Software testing is "defense in depth"
	- Unit tests are the first line of defense
	- Acceptance testing (This is what we do with STAR nightly tests...)
		- "This ain't great, but it works..."
	- 



