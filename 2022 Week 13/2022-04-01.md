## Friday 04/01/2022

- [x] 1000AM [NPPS Weekly Meeting](https://docs.google.com/document/d/1YfTyXPeXNQU4XUB28bvHJolgyBIJ2bfrd0u9Gd3WD70/edit)[zoom](https://bnl.zoomgov.com/j/16157150845?pwd=NXNqTi9ZWEFBKzYwRXQ5U3NXU1dBZz09)
	- [x] [[sPhenix Handy Remote Execution Coordinator 1]]
- [ ] TODO: Weekly Summary


---

SHREK
- Run test ala...
```
pchain --cwl shrek/shrek.cwl --yaml shrek/tests/hfpass1.yaml --outDS user.jwebb2.d86f313f-6658-483a-98e6-6e9bc260ef02 --vo wlcg --workingGroup sphenix --prodSourceLabel test
```
- The shrek.cwl is supposed to create two files
	- 'runjob.sh' and 'g4charm-env.sh'
	- First file is a simple wrapper which sets up the parameters which must be passed in as command line options, and calls the second script
	- The second script initializes the environment, sets up environment variables which control execution of the user commands, and then runs the user commands specified in the yaml file
- Neither of these files are showing up in the directory where we run
- Few possibilities...
	1. Does PanDA / pchain respect the `InitialWorkDirRequirement` requirement in CWL?
	2. If so, where does the cwl-runner actually run?   Does pchain run in the same directory that CWL populates?
	3. Are they generated in a subdirectory?  No.

Looking at the "extra" files in the run directory... there's a python script (which holds the command that prun is executing...) there's a header file (defines an output name)... and there is a tar file with the contents of the directory from the sphnx node where I submitted the pchain command.  Also, all of the files are owned by jwebb2/sphenix.  

So I infer that the tar file is created on my local machine, transfered through the panda server, and unpacked on the remote worker node.

When the cwl-runner runs on the PanDA server, ... the files created by the runner *are not* added to the tar file.

email Tadashi to confirm and ask if he thinks it would be a reasonable feature to add.  Perhaps as an option to pchain.
