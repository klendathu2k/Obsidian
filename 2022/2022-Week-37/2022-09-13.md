## Tuesday {{date}}

- [ ] 0100PM [NPPS Distributed Software](https://docs.google.com/document/d/1L8DAzhCwpVoRM_WptpZFKqJev4-odk4xDl5rDK6JMYs/edit#heading=h.d6jxgv7ina59)[zoom](https://bnl.zoomgov.com/j/16157150845?pwd=NXNqTi9ZWEFBKzYwRXQ5U3NXU1dBZz09)

Starting to add the submission functionality...

```
$ shrek/scripts/watchRucioForNewDatasets.py --match '*test10*CharmSimu*.tar' --period=30 --startdate='2022-08-03' --workflows=workflows/HF_pp200_charm-ana.315/*.yaml 
[Donkey 2022-09-13 16:57:21.800761 polling datasets since 2022-08-03 : 1 datasets match : updated_at>2022-08-03]
shrek --no-submit --no-check --tag=sP22a-test66-0 user.jwebb2:user.jwebb2.sP22s-hfcharm-signal-test10_000_Pythia8CharmSimulation_Pythia8CharmSimulation.outDS.tar
[Donkey 2022-09-13 16:57:52.946983 polling datasets since 2022-09-13 16:57:21.800761 : 0 datasets match : updated_at>2022-09-13 16:57:21.800761]
```

Here the issue is that once we match the dataset, we need to manipulate the dataset name to remove the trailing junk that PanDA and/or Rucio appends to it...

Basically the rule is to split by an underscore, drop the last entry, and join...

Probably need to have a flag to dis/enable git pushing...

...

Now problem is that executing the submitWorkflowToPanda script using the `sh` package... does not seem to be working...  it is unable to copy the workflows into the submission directory...  b/c ... ???  

I can confirm that previously working submissions using shrek directly work.  So what is going on here?

Even the "simple" workflow is having this problem...

---------------------

/