## Monday {{date}}

- [ ] [Update Telework](https://docs.google.com/spreadsheets/d/16AZZBiKL1s6eGgH2KFiJPnD8-TjRsC0HYy4Qdmbr358/edit#gid=0)

- More thinking on memory layout for geometries...
	- During track propagation through a volume, calculation of the next safe step size will be the most frequent operation
	- Step limits will be calculated due to 
		- Physics process (requiring material / medium lookup)
		- Intersection with daughter volumes (requiring shape lookup and reference system transformation)
		- Exiting of the current volume (shape lookup)
		- Limitation due to bending of magnetic field (...)
	- Data locality would suggest keeping the parameters of the daughter volume close together.
		- new TGeo* and new G4* allocates on the heap with no guarentees of proximity in memory...
		- Likewise, users likely to have odd memory access paterns... such as reusing materials from widley distant (in memory) volumes, reusing rotation / translaotion matrices, reusing shapes, etc....
		- So there are no guarentees of users creating code which is cache friendly

- Basic idea is to create a library which regularizes the memory layout for geometry models...  

parent volume : material | medium | matrix 1 .. matrix N | shape 1 .. shape N | daughter 1 .. daughter N 

One does not need to get too fancy here...  

struct VolumeBank {
    Volume volume;
	Material material;
	Medium medium;
	int numberOfChildren;
	std::vector< Matrix > matrix;
	std::vector< VolumeBank > children;
}

The STL vectors represent contiguous blocks of memory.  As long as we remain valur oriented (as opposed to allocating these things on the heap with new) then... the memory layout *of the vectors* should be contiguous...

HOwever... the above structure *does not guarentee* that the address of numberOfChildren and the elements of matrix are contiguous.  And that may be a bit of a problem... b/c we need to keep the whole VolumeBank in contiguous memory.  (std::vector places its objects out on the heap somewhere, not necessarily adjacent to the struct which it is within.)

-----------------------

More discussion regarding the sTGC material budgets... they are "seeing" inconsistencies comparing mother volume to sum of daughters... which makes little sense...

Got pointer to the code and will review when I have a chance

-------------------------

Waiting on jobs to fail for sPHENIX to report...

--------------------------



