## Thursday {{date}}

Okay... need to keep up the habit of daily entries, or minimally do the following:
![[Pasted image 20220609131640.png]]

- eTOF software review... they are modifying the in memory ROOT/vmc geometry model... to apply (mis) alignments... but they have no guarentee that their changes will exist once event processing begins...  Commented / review that they need to keep pointer to their version of the geometry.  (Which will have other changes applied as well... but they appear to only need the geometry to be "correct" from the TPC gas volume to the eTOF.)

- Akio's changes for FCS need to be reviewed... need to move forward on this.  Will analyse / comment this afternoon.

- Thoughts on EIC geometry discussion ... (some of which I spent time on yesterday)...
	- EIC is currently trying to converge towards a common geometry modeling so as to facilitate collaboration between the different experimental collaborations / R&D projects / detector proposals / etc...
	- Perhaps more precisely... management is trying to herd the various into a common framework / toolkit / whatever...
	- Previously (2019) I summarized DD4Hep, FairRoot (aka EicRoot), and AgML frameworks in an EIC forum...  Skipped over F4A b/c I had little knowledge / time to investigate
	- Currently groups are invested in DD4Hep and Fun4All... and speaking with Kolja EicRoot is still a thing... but is disfavored...
	- There is always intertia that builds up behind frameworks b/c teams invest time and effort into creating, tuning and gaining confidence in their detector models.
		- Confidence may not be entirely warrented... however
		- Not easy to get groups to change...
			- Case in point, STAR circa 2004...
				- Working simulation package *starsim* based on G3 using agi / aka gstar / aka altsim, integrated into the STAR oo framework.
				- Virtual Monte Carlo was the *next big thing*, S&C team has the TPC done, just need to get the other baseline detectors going!
				- Rewrite your gstar files as ROOT VMC geometries!  And magically, we make the switch!
					- What about testing?  Tuning?  Validation?  
					- How much better is this?  (Incremental improvement over what we have... plus path to geant4...)
					- And... I'd rather just do physics with something that is already working.
			- Fast forward to circa 2010... 
				- ~6 years worth of geometry models added
				- support for existing productions / publications add to requirements
				- VMC work has stalled... mainly how to get the geometry?
				- Lesson learned... scientists are not going to rewrite anything... There *must be an automated translation*.
				- AgML
			- Fast forward to ~2014 - ~2016
				- Misalignements needed for HFT
				- Problems integrating HFT  into track finding --> 
					- Issue was automatic translation of the ROOT geometry to the tracker geometry model...
					- Physics groups not interested in implementing tracker geometry directly... S&C did not have expertise in the detector to implement... so...
					- Required effort to identifiy / upgrade Sti geometry model and implement simplified version by hand.
				- Available time to create / tune / validate a new simulation package short...
				- Decision to extend AgML to handle misalignments...
			- Fastforward to ... 2020...
				- COVID hits...
				- We go home... I roll up my sleeves and start serious push to implementing geant4star...
				- VMC geometry... reuse all other existing components... drop in replacement for starsim...  targeting only the forward physics program...
				- Yet to get much if any traction on physics evaluation / etc...
				- Inertia builds up not because of the geometry model, but because of all of the other places in the code where it touches.
					- Event data model... need to map hits on to the physical volumes... requireing a unique ID scheme... which of course depends on the hierarchy of the geometry... 
						- Order of creating volumes should not matter
						- STAR strategy is to define detector modules ... module / copy numbers and name of sensitive volume sufficient to identify the struck PV.
				- geant4star...  actually, the software stack for G4star... can be used as a complete illustration, right?
					- AgML 1.0 component is the basic geometry
					- AgML 2.0 component provided the misalignment support 
					- AgML 3.0 component added in the extension layers needed to create a full sim application... touching sensitive detectors / collections... structures to hold cuts... and unique volume IDs...

  - In principle, geometry exchange is just... an exchange issue.  There is a graph structure with static properties (material, track propagation cuts, etc...) attached at the nodes.  In addition, there are dynamic properties as well (e.g. hit scoring routines, event data model, etc...).  
  - And there are framework structures unrelated to the geometry.  
	  - How the detectors relate to each other in a reconstruction chain.  Which reconstruction tasks run before the others... ETC...
	  - I believe that F4A hangs detector geometry off of a graph of detector objects... the PHCompositeNode

	- So where does this leave us?  
		
	
	